User action model and DNS traffic generator specification

To run (in CP1 environment) put this folder at the same level as the CP1 test or probablistic folders

toc-um-dns.txt lists the files, what each file loads
and the modules defined -- trying to keep track of
dependencies

General cp2 files
 byteseq.maude   
   defines sorts ByteSeq, ByteSeqL and constructors
    for files, encrypted files, file fragments, images,
    and images with embedded content.
            
 json.maude  
   defines a representation of JSON in Maude
     uses sort JV and injection functions
     jn/js/jl/jo from Nat/String/List{JV}/Map{String,JV}
     to JV -avoids putting many sorts in the same kind

 my-sampler.maude
   versions of some sampling functions that take an
   index to generate next random numbers rather than
   using the builtin counter object.
   Using this to support future transformations

 cp2-interfaces.maude  
   and CP2-COMMON -- a bunch of shared definitions,
   including rCtr(j) an `actor' used to share the
   current random sequence index

Actor specifications
  markov-action-model.maude 
    specifies the structure of markov-action models (MAm)
     (contents of T&E action configuration files)
  dns-mamodel.maude   
    example DNS MAm -- used to test
  user-action-actor.maude
    specifies behavior of a generic user-action model
      constructor parameterized by a MAm
      a user-action actor drives a traffic generator via
       actionQ(actionspec), actionR(code) message content
         actionspec is the (rendered) element of the
         MAm current action
         
  dnsTgen-actor.maude 
   defines DNS traffic generator actor
   includes test module and maude commands
      testing each msg receive case 

  fake-rsv.maude 
    defines a fake resolver actor (that replies with
       empty response) for basic testing

  ../test/test-um-dns.maude   
    basic test modules for testing all rules
     of user model and dns tgen fire as expected
    uses fakeRSV and DNS modules for scheduling  
    see example rewrite after the eof
   
  ../test/test-um-dns-cp1.maude 
   a cp1 configuration modified to have only dns actors
     and the dns traffic generator actors
   see example rewrite after the eof
        
 
===TOC===

byteseq.maude   
  loads prelude
  fmod BYTESEQ is inc CONVERSION
            
json.maude    
  loads prelude
  fmod JV is inc CONVERSION .
  view JV from TRIV to JV 
  fmod JSON is inc JV . inc MAP{String,JV} .

my-sampler.maude
  load prelude
  fmod MY-SAMPLER is pr RANDOM . pr CONVERSION .
                     inc MAP{String,Float} .

cp2-interfaces.maude      
   sload byteseq.maude
   sload <dnssrcpath>/common/actor.maude
   sload json.maude
   mod CP2-COMMON incs SCHEDULER+ACTOR-MODEL+PARAMETERS 
   mod TGEN-INTERFACE 
       incs ACTOR-MODEL+JSON+MAP{String,JV} 
      --- um <-> tgen actor
   mod RB-INTERFACE incs ACTOR-MODEL+BYTESEQ 
      --- alice to rb, rb to bob
   mod IODINE-BI-INTERFACE incs ACTOR-MODEL+BYTESEQ 
       --- alice to IC, IS to bob
   mod MC-INTERFACE incs ACTOR-MODEL+BYTESEQ 
       --- mastodon client req/resp
   mod ED-INTERFACE incs ACTOR-MODEL+BYTESEQ 
       --- destini req/resp
   < more to come > mastodon server, traffic generators

markov-action-model.maude 
  loads my-sampler json
  view Map`{String`,Float`} 
       from TRIV to MAP{String,Float}
  fmod MARKOV-ACTION-MODEL is inc JSON . 
       inc MAP{String,Map`{String`,Float`}} .
       inc MY-SAMPLER  .

dns-mamodel.maude   
   loads markov-action-model.maude
   fmod DNS-MAMODEL incs  MARKOV-ACTION-MODEL 

user-action-actor.maude
   loads markov-action-model,cp2-interfaces,dns-mamodel
         <dnssrcpath>/common/actor.maude
          ../cp2-v1/apmaude-default.maude
   mod USER-ACTION-ACTOR 
     incs MARKOV-ACTION-MODEL+CP2-COMMON+TGEN-INTERFACE 

dnsTgen-actor.maude 
   loads <dnssrcpath>/common/prelim, 
         my-sampler, cp2-interfaces .
   mod DNS-TGEN 
       incs CP2-COMMON+MY-SAMPLER+MSG+TGEN-INTERFACE 
             --- SCHEDULER+ACTOR-MODEL+PARAMETERS 
   mod TEST-DNS-TGEN incs DNS-TGEN+DNS-MAMODEL
   maude commands testing each receive case

fake-rsv.maude --- replies with empty response
   loads <dnspathsrc>/common/prelim.maude
         <dnspathsrc>/common/actor.maude
          cp-interfaces, my-sampler
    mod FAKE-RSV incs MSG + CP2-COMMON + MY-SAMPLER 

test-um-dns.maude
   loads user-action-actor, dnsTgen-actor, fake-rsv
   mod DNS-TGEN-SCENARIO 
    incs USER-ACTION-ACTOR+DNS-TGEN+DNS-MAMODEL+FAKE-RSV 
   test run at the end

test-um-dns-cp1.maude
loads <dnssrcpath>/probabilistic-model/dns
       user-action-actor.maude
       dnsTgen-actor.maude
   mod DNS-TGEN-TEST 
     incs  DNS+USER-ACTION-ACTOR+DNS-TGEN+DNS-MAMODEL .
   test run at the end

